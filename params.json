{"name":"Cordova Presentation API Plugin","tagline":"","body":"# Create native multiscreen apps in minutes.\r\n\r\n***  \r\n**// Quick Info**   \r\n**//** *Implementation of the Presentation API as Apache Cordova Plugin*   \r\n**//** Based on spec: [W3C Presentation API](http://www.w3.org/2014/secondscreen/presentation-api/20140721/), [latest draft version](http://w3c.github.io/presentation-api/)   \r\n**//** Discussed in groups: [W3C Second Screen CG](http://www.w3.org/community/webscreens/), [W3C Second Screen WG](http://www.w3.org/2014/secondscreen/)   \r\n**//** Available in framework: [FAMIUM Multiscreen](http://www.fokus.fraunhofer.de/en/fame/Solutions/FAMIUM_Multiscreen/index.html)   \r\n***\r\n\r\n## For the impatient\r\n\r\nPlease check out our simple [HelloApp](http://fraunhoferfokus.github.io/cordova-plugin-presentation-helloapp/) \r\nto get a first impression on multiscreen app development using this plugin. With the instructions given there the sample app is built in less than a minute!\r\n\r\n## Introduction\r\n\r\nThis document describes the Apache Cordova implementation of the [Presentation API](http://www.w3.org/2014/secondscreen/presentation-api/20140721/) introduced by the [W3C Second Screen Presentation Community Group](http://www.w3.org/community/webscreens/) and which is discussed now within the [Second Screen Presentation Working Group](http://www.w3.org/2014/secondscreen/). The implementation is an open-sourced part of [FAMIUM](http://www.fokus.fraunhofer.de/go/famium), an end-to-end prototype implementation for early technology evaluation and interoperability testing introduced by Fraunhofer FOKUSâ€™ Competence Center [Future Applications and Media](http://www.fokus.fraunhofer.de/go/fame) ([FAME](http://www.fokus.fraunhofer.de/go/fame)). \r\n\r\nUsing this plugin, Presentation API powered apps can be built today, (hopefully not so) long before the Presentation API has landed in our Web browsers. \r\n\r\nNotice: Our Implementation supports [this version of the Presentation API](http://www.w3.org/2014/secondscreen/presentation-api/20140721/). Please refer  also to the [latest work-in-progress version of the API](http://w3c.github.io/presentation-api) which we are currently working on.\r\n\r\nThe main purpose of the [Presentation API](http://www.w3.org/2014/secondscreen/presentation-api/20140721/) is to enable web pages to access external presentation-type displays and use them for presenting web content. It aims to make secondary displays such as a projector or a connected TV available to the web and takes into account displays that are attached using wired (HDMI, DVI or similar) and wireless technologies (MiraCast, Chromecast, DLNA, AirPlay or similar). At its core, the specification of the Presentation API enables an exchange of messages between a requesting page and a presentation page shown in the secondary display. How those messages are transmitted is left to the UA in order to allow for use of display devices that can be attached in a wide variety of ways. For example, when a display device is attached using HDMI or MiraCast, the UA on the requesting device can render the requested presentation page in that same UA, but instead of displaying in a window on that same device, it can use whatever means the operating system provides for using those external displays. In that case, both the requesting page and the presentation page run on the requesting device and the operating system is used to route the presentation display output to the other display device. The second display device doesn't need to know anything about this spec or that the content involves HTML5. Alternately, some types of external displays may be able to render HTML5 themselves and may have defined their own way to send messages to that content. In that case, the UA on the requesting device would not need to render the presentation page itself. Instead, the UA could act as a proxy translating the request to show a page and the messages into the form understood by the display device. \r\n\r\nSince the [Presentation API](http://www.w3.org/2014/secondscreen/presentation-api/20140721/) abstracts from all the technologies described above and specifies only the interfaces, there are different ways to implement it depending from the target platform of the controlling device and the presenting display as well as from the technologies and protocols used behind. \r\n\r\n![Schema](docs/schema.png)\r\n\r\nThis Cordova Presentation API Plugin implementation supports currently the following platforms and technologies, utilizing the single UA approach and streaming the contents of a second WebView to the external display:\r\n\r\n* iOS devices connecting via AV cable or AirPlay mirroring, utilizing [Multiple Display Programming Guide for iOS](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/WindowAndScreenGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012555-CH1-SW1)\r\n* Android devices connecting via AV cable or MiraCast, utilizing [Android Presentation API](https://developer.android.com/reference/android/app/Presentation.html)\r\n\r\nFurther implementations of the Presentation API (non Cordova) are available at [FAMIUM Webscreens](https://gitlab.fokus.fraunhofer.de/famium/famium-webscreens/wikis/home).\r\n\r\n## Plugin API documentation \r\n\r\nThe full plugin API documentation of the implemented Presentation API is available in the [doc](https://github.com/fraunhoferfokus/cordova-plugin-presentation/blob/master/doc/index.md) folder.\r\n\r\n## From zero to hero\r\n\r\n### Step by step guide to develop multiscreen apps using the Cordova Presentation API Plugin\r\n\r\nPrerequisites: It is assumed that you have your development system set up. We used \r\n* [Cordova 4.0.0](http://cordova.apache.org/docs/en/4.0.0/)\r\n* [Android SDK, API level 19](https://developer.android.com/about/versions/android-4.4.html)\r\n* [Xcode 6.0.1 with iOS 8.0 SDK](https://developer.apple.com/xcode/downloads/)\r\n\r\n#### Step 1: Preparing the app project\r\n\r\nIt starts with the creation of the project folder and obligatory Cordova files. \r\nThis is easily with the ```cordova```command if you have installed Apache Cordova successfully.\r\nLet's name our first app \"MyFirstPresentaionApp\" and execute in a shell in $HOME/devel folder:\r\n\r\n```\r\n$ cordova create mypresentation com.example.mypresentation MyFirstPresentaionApp\r\nCreating a new cordova project with name \"HelloCordova\" and id \"MyFirstPresentaionApp\" at location \"$HOME/devel/mypresentation\"\r\n```\r\n\r\nNow we will change into the freshly created project folder and add the platforms we would like to build the app for:\r\n\r\n```\r\n$ cd mypresentation\r\n$ cordova platform add ios\r\nCreating ios project...\r\n$ cordova platform add android\r\nCreating android project...\r\nCreating Cordova project for the Android platform:\r\n\tPath: platforms/android\r\n\tPackage: com.example.mypresentation\r\n\tName: MyFirstPresentaionApp\r\n\tAndroid target: android-19\r\nCopying template files...\r\nProject successfully created.\r\n```\r\n\r\nFinally, we add the Cordova Presentation API Plugin by executing:\r\n\r\n```\r\n$ cordova plugin add de.fhg.fokus.famium.presentation\r\nFetching plugin \"de.fhg.fokus.famium.presentation\" via plugin registry\r\nnpm http GET http://registry.cordova.io/de.fhg.fokus.famium.presentation\r\nnpm http 304 http://registry.cordova.io/de.fhg.fokus.famium.presentation\r\nInstalling \"de.fhg.fokus.famium.presentation\" for android\r\nInstalling \"de.fhg.fokus.famium.presentation\" for ios\r\n```\r\n\r\nAlternatively to the last command, you may wish to use the cutting edge version of the plugin or your own version. In this case you can specify the repo url:\r\n\r\n```\r\n$ cordova plugin add https://github.com/fraunhoferfokus/cordova-plugin-presentation.git\r\nFetching plugin \"https://github.com/fraunhoferfokus/cordova-plugin-presentation.git\" via git clone\r\nInstalling \"de.fhg.fokus.famium.presentation\" for android\r\nInstalling \"de.fhg.fokus.famium.presentation\" for ios\r\n```\r\n\r\nNow we move on to the interesting part, the app development.\r\n\r\n#### Step 2: Implementing the multiscreen app\r\n\r\nThis is the most crucial step, since it's about realizing your app idea. At least, you don't have to care about implementing the bits and pieces to connect and handle external displays. The plugin will do the work for you, if only your code implements agains the [Presentation API](http://www.w3.org/2014/secondscreen/presentation-api/20140721/).\r\n\r\nSo let's implement the following very simple app idea: The controlling page connects to an external screen and provides a button. If the button is clicked then the current date and time will be posted to the presenting page and displayed on the big screen.\r\n\r\nFor this purpose, we purge the contents of the ```$HOME/devel/mypresentation/www``` folder and create two new files:\r\n\r\n* index.html that will be our controlling page \r\n* display.html that will be our presenting page\r\n\r\nThe contents of the index.html could look like:\r\n\r\n```\r\n<!-- index.html -->\r\n<!doctype html>\r\n<html>\r\n<head>\r\n   <title>MyFirstPresentaionApp</title>\r\n   <script type=\"text/javascript\" src=\"cordova.js\"></script>\r\n</head>\r\n<body>\r\n\r\n   <button>Send Date and Time to Big Screen</button>\r\n\r\n   <script type=\"text/javascript\">\r\n      var onDeviceReady = function(){\r\n         var session,\r\n             button = document.querySelector('button');\r\n         button.disabled = true;\r\n         button.onclick = function(){\r\n            if (session && session.state == \"connected\")\r\n               session.postMessage(new Date().toString());\r\n         }\r\n         navigator.presentation.onavailablechange = function(screenEvent){\r\n            if(screenEvent.available){\r\n               session = navigator.presentation.requestSession(\"display.html\");\r\n               session.onmessage = function(msg){ /*we don't care in this app*/ };\r\n               session.onstatechange = function(){\r\n                  button.disabled = session.state != \"connected\";\r\n               }\r\n            }\r\n         };\r\n      };\r\n      document.addEventListener('deviceready', onDeviceReady, false);\r\n   </script>\r\n\r\n</body>\r\n</html>\r\n```\r\n\r\nThe contents of the display.html could look like:\r\n\r\n```\r\n<!-- display.html -->\r\n<!doctype html>\r\n<html>\r\n<head>\r\n   <title>MyFirstPresentaionApp | Display</title>\r\n</head>\r\n<body>\r\n   <h1>Waiting for a Date and Time update...</h1>\r\n   <div></div>\r\n\r\n   <script type=\"text/javascript\">\r\n      var onDeviceReady = function(){\r\n         var session,\r\n             div = document.querySelector('div');\r\n         navigator.presentation.onpresent = function(presentEvent){\r\n            session = presentEvent.session;\r\n            session.onmessage = function(msg){\r\n               div.innerText = msg;\r\n            };\r\n            session.onstatechange = function(){\r\n               div.innerText = session.state;\r\n            }\r\n         };\r\n      };\r\n      document.addEventListener('deviceready', onDeviceReady, false);\r\n   </script>\r\n\r\n</body>\r\n</html>\r\n```\r\n\r\nPitfall: Do not include the ```cordova.js``` into the presenting page, since only the controlling page is a Cordova WebView. \r\n\r\n#### Step 3: Building and running \r\n\r\nHaving the hard part done, now we finalize the app by building and running it. This is done again very easily using the ```cordova```command. To build:\r\n\r\n```\r\n$ cordova build ios\r\n//lot of output (hopefully;) ending with  \r\n** BUILD SUCCEEDED **\r\n$ cordova build android\r\n//lot of output (hopefully;) ending with  \r\nBUILD SUCCESSFUL\r\nTotal time: 20 seconds\r\nBuilt the following apk(s):\r\n    $HOME/devel/mypresentation/platforms/android/ant-build/CordovaApp-debug.apk\r\n```\r\n\r\nTo run the app just execute for iOS:\r\n\r\n```\r\n$ cordova run ios\r\n```\r\n\r\nIn iOS case the iPhone Simulator will be launched and you can activate the external display by choosing e.g. ```Hardware``` -> ```External Display``` -> ```1024 x 768```. Alternatively, you may want to open the Xcode project and tweak your app or deploy it to a real device from there. In this case, you will find the project at ```$HOME/devel/mypresentation/platforms/ios/MyFirstPresentaionApp.xcodeproj```\r\n\r\nTo run for Android:\r\n\r\n```\r\n$ cordova run android\r\n```\r\n\r\nThe run command for Android requires you to have either a (MiraCast capable) Android device attached to your computer and its accessible by adb (use ```$ adb devices``` to check) or you have created an emulator (```$ android avd```) and simulating an external screen using the appropriate setting in the developer settings.\r\n\r\nCongratulations, you have managed to build an native app using the Cordova Presentation API Plugin.\r\n\r\n## Contribution\r\n\r\nWe are grateful for any valuable contribution, like [issue reports](https://github.com/fraunhoferfokus/cordova-plugin-presentation/issues), [documentation localizations](https://github.com/fraunhoferfokus/cordova-plugin-presentation/tree/master/doc), [tests](https://github.com/fraunhoferfokus/cordova-plugin-presentation/tree/master/tests) or [pull requests](https://github.com/fraunhoferfokus/cordova-plugin-presentation/pulls).\r\n\r\nMoreover, we would love to hear which exciting apps you have created using the Presentation API.\r\n\r\n# License\r\n\r\nCopyright 2014 Fraunhofer FOKUS\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n\r\n### Contact\r\n\r\n[Fraunhofer FOKUS - Competence Center FAME // Future Applications and Media](http://www.fokus.fraunhofer.de/en/fame/index.html)\r\n\r\n![.](http://webinos.fokus.fraunhofer.de:3002/piwik/piwik.php?idsite=2&rec=1)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}